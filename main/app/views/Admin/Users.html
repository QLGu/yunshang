{{set . "title" "用户管理"}}
{{template "header.html" .}}

<div class="container">
    <div class="row">
        <h1>用户管理</h1>
        <hr>

        {{template "flash.html" .}}

        <div>用户总数: {{.users_total}}</div>
        <table class="table">
            <tr>
                <th>ID</th>
                <th>Login Name</th>
                <th>Email</th>
                <th>Enable</th>
                <th>Password</th>
                <th>ActivationCode</th>
                <th>LastSignAt</th>
                <th>...</th>
            </tr>
            {{range .users}}
            <tr>
                <td>{{.Id}}</td>
                <td>{{emptyOr .LoginName "空(用户还未设置)"}}</td>
                <td>{{.Email}}</td>
                <td>{{valueAsName .Enabled "user_enabled"}}</td>
                <td>{{.CryptedPassword}}</td>
                <td>{{.ActivationCode}}</td>
                <td>{{.LastSignAt | datetime}}</td>
                <td>{{if isAdminByName .LoginName}}
                    {{else}}
                    <a data-url='{{url "Admin.ResetUserPassword" .Id}}' class="btn btn-warning">重置密码</a>
                    <a data-url='{{url "Admin.ToggleUserEnabled" .Id}}' class="btn btn-danger" data-after="reloadWindow()">{{valueOppoAsName .Enabled "user_enabled"}}</a>
                    {{end}}
                </td>
            </tr>
            {{end}}
        </table>
    </div>
</div>

{{template "footer.html" .}}
